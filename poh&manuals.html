<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>POH & Manuals – The Flying 64th</title>

  <style>
    :root{
      --bg:#0f1115; --ink:#e9eef7; --muted:#b9c2d0;
      --panel:#151924; --panel2:#0d1018;
      --accent:#4da3ff; --border:rgba(255,255,255,.1);
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
      background:var(--bg); color:var(--ink);
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }

    /* ===== NAV BAR ===== */
    header {
      position: sticky; top: 0; z-index: 1000;
      background: #0b0e15;
      border-bottom: 1px solid var(--border);
    }
    .nav {
      max-width: 1200px; margin: 0 auto; padding: 10px 12px;
      display: flex; align-items: center; gap: 12px;
    }
    .brand a {
      font-weight: 700; font-size: 20px;
      color: #fff; text-decoration: none;
      margin-right: auto;
      white-space:nowrap;
    }
    nav {
      display:flex; gap:6px; overflow-x:auto; white-space:nowrap;
      -webkit-overflow-scrolling: touch; scrollbar-width:none;
    }
    nav::-webkit-scrollbar{display:none}
    nav a {
      color: #b6c0cf; text-decoration: none;
      padding: 8px 12px; border-radius: 10px;
      transition:.2s;
      display:inline-block;
    }
    nav a:hover { color:#fff; background:rgba(255,255,255,.08) }
    nav a.active { background:#4da3ff; color:#fff; font-weight:600 }

    /* ===== HERO ===== */
    .hero{
      position:relative; isolation:isolate; background:#0c0f17;
    }
    .hero::before{
      content:""; position:absolute; inset:0; z-index:-1;
      background:url("images/planesc172.1.jpg") center/cover no-repeat;
      opacity:.22;
    }
    @media (min-width: 900px){ .hero::before{ background-attachment: fixed; } }
    .hero-inner{
      max-width:1200px; margin:0 auto; padding:28px 14px 20px;
    }
    .hero h1{ margin:0 0 6px; font-size:clamp(24px, 4vw, 38px) }
    .hero p{ margin:0; color:var(--muted); font-size:14px }

    /* ===== LAYOUT ===== */
    .container{
      max-width:1200px; margin:16px auto 60px; padding:0 14px;
      display:grid; grid-template-columns: 320px 1fr; gap:16px;
    }

    /* Desktop sidebar (hidden on mobile) */
    .panel{
      background:linear-gradient(180deg,var(--panel),var(--panel2));
      border:1px solid var(--border); border-radius:var(--radius); overflow:hidden;
    }
    .panel h2{
      margin:0; padding:12px 12px 10px; font-size:16px; color:#cfe1ff;
      border-bottom:1px solid var(--border);
    }
    .search-wrap{ padding:10px 10px; border-bottom:1px solid var(--border); }
    .search{
      width:100%; padding:10px 12px; border-radius:10px; background:#0b0e15; color:var(--ink);
      border:1px solid var(--border); outline:none;
    }
    .filelist{ list-style:none; margin:0; padding:6px 6px 8px; max-height:65vh; overflow:auto }
    .filelist li a{
      display:flex; align-items:center; gap:10px; padding:10px; border-radius:10px; color:var(--ink);
      text-decoration:none;
    }
    .filelist li a:hover{ background:rgba(255,255,255,.06) }
    .filelist li a.active{ background:rgba(77,163,255,.12); outline:1px solid rgba(77,163,255,.28) }
    .file-name{ font-weight:600; font-size:14.5px }
    .file-sub{ color:var(--muted); font-size:12px }
    .pdf-icon{ width:26px; height:26px; flex:0 0 26px; display:grid; place-content:center;
      border-radius:6px; background:rgba(77,163,255,.16); border:1px solid rgba(77,163,255,.35); }
    .pdf-icon svg{ width:16px; height:16px; opacity:.9 }

    /* Viewer */
    .viewer{ display:grid; grid-template-rows:auto 1fr; gap:10px; min-height:70vh; }
    .viewer-actions{
      display:flex; align-items:center; gap:10px; justify-content:space-between; flex-wrap:wrap;
      background:linear-gradient(180deg,var(--panel),var(--panel2));
      border:1px solid var(--border); border-radius:var(--radius); padding:8px 10px;
    }
    .crumb{ font-size:14px; color:var(--muted) }
    .crumb b{ color:#e5f0ff }
    .btn{
      border:1px solid var(--border); background:#0c1020; color:#eaf2ff;
      padding:10px 14px; border-radius:10px; text-decoration:none; font-weight:600;
      display:inline-flex; align-items:center; gap:8px;
    }
    .btn:hover{ border-color:rgba(77,163,255,.45); background:#0e1630 }
    .btn.primary{ background:linear-gradient(180deg,#2b6bb1,#1c4370); border:1px solid #2b6bb1; }

    .iframe-wrap{
      background:#0b0f1a; border:1px solid var(--border); border-radius:var(--radius); overflow:hidden;
      min-height:60vh;
    }
    iframe{ display:block; width:100%; height:70vh; border:0; background:#0b0f1a; }
    .placeholder{ padding:22px; color:var(--muted) }
    .placeholder h3{ margin:0 0 6px }

    /* ===== MOBILE FIRST CLEANUP ===== */
    /* Stack layout, hide sidebar, use simple select */
    .mobile-picker{
      display:none; gap:8px; align-items:center; background:linear-gradient(180deg,var(--panel),var(--panel2));
      border:1px solid var(--border); border-radius:var(--radius); padding:10px;
    }
    .mobile-picker label{ font-size:14px; color:#cfe1ff; white-space:nowrap; }
    .mobile-select{
      flex:1; padding:10px 12px; border-radius:10px; background:#0b0e15; color:var(--ink);
      border:1px solid var(--border); outline:none;
    }

    @media (max-width: 900px){
      .container{
        display:block; /* single column */
      }
      .panel{ display:none; }          /* hide crowded sidebar on phones */
      .mobile-picker{ display:flex; margin-bottom:10px; }
      .viewer-actions{ gap:8px; }
      .btn{ padding:10px 12px; }
      .hero-inner{ padding:22px 14px 16px; }
      nav a{ padding:8px 10px; }       /* better fit in top bar */
      iframe{ height: calc(100vh - 270px); } /* fill most of the screen on phones */
    }

    /* iOS viewport fix when URL bar hides/shows */
    @supports (-webkit-touch-callout: none) {
      @media (max-width:900px){
        iframe{ height: calc(100svh - 270px); }
      }
    }
  </style>
</head>
<body>

 <!-- ===== NAV BAR (fixed for desktop + mobile) ===== -->
<header>
  <div class="nav">
    <img src="images/logo.png" alt="The Flying 64th Logo"
         style="height:48px;width:auto;border-radius:8px;margin-right:10px;">
    <div class="brand"><a href="home.html">The Flying 64th</a></div>
    <nav>
      <a href="home.html">Home</a>
      <a href="calendar.html">Calendar</a>
      <a href="be.html">Become a Member</a>
      <a href="photos.html">Photos</a>
      <a href="poh&amp;manuals.html">POH &amp; Manuals</a>
    </nav>
  </div>
</header>

<style>
  /* Header container */
  header{
    position:sticky; top:0; z-index:1000;
    background:#0b0e15; border-bottom:1px solid rgba(255,255,255,.1);
  }
  .nav{
    max-width:1200px; margin:0 auto; padding:12px 18px;
    display:flex; align-items:center; gap:12px;
  }
  .brand a{
    font-weight:700; font-size:20px; color:#fff; text-decoration:none;
    margin-right:auto; white-space:nowrap;
  }

  /* DESKTOP NAV (default) */
  nav{
    display:flex; align-items:center; gap:22px;   /* roomy spacing on desktop */
    flex-wrap:nowrap; overflow:visible;           /* no scrollbars on desktop */
  }
  nav a{
    color:#b6c0cf; text-decoration:none;
    padding:10px 14px; border-radius:10px; transition:.2s;
  }
  nav a:hover{ color:#fff; background:rgba(255,255,255,.08) }
  nav a.active{ background:#4da3ff; color:#fff; font-weight:600 }

  /* MOBILE tweaks only */
  @media (max-width:900px){
    .nav{ padding:10px 12px; gap:10px; }
    nav{
      gap:8px; overflow-x:auto; -webkit-overflow-scrolling:touch;
      scrollbar-width:none;
    }
    nav::-webkit-scrollbar{ display:none; }
    nav a{ padding:8px 12px; }
  }
</style>

<script>
  // Auto-highlight current page
  (function(){
    const current = location.pathname.split('/').pop().toLowerCase();
    document.querySelectorAll('header nav a').forEach(a=>{
      const href = (a.getAttribute('href')||'').split('?')[0].toLowerCase();
      if(href && href === current) a.classList.add('active');
    });
  })();
</script>

  <!-- ===== HERO ===== -->
  <section class="hero" role="img" aria-label="Cessna aircraft on ramp">
    <div class="hero-inner">
      <h1>POH &amp; Manuals</h1>
      <p>View aircraft POHs, avionics manuals, and checklists. On mobile, pick a file below; on desktop, use the sidebar.</p>
    </div>
  </section>

  <!-- ===== MAIN ===== -->
  <main class="container">
    <!-- Mobile: simple picker -->
    <div class="mobile-picker" aria-label="Choose document">
      <label for="mobileSelect">Document</label>
      <select id="mobileSelect" class="mobile-select"></select>
    </div>

    <!-- Desktop: sidebar list -->
    <aside class="panel" aria-label="Document list">
      <h2>Documents</h2>
      <div class="search-wrap">
        <input id="search" class="search" type="search" placeholder="Search by aircraft, system, or name…" aria-label="Search documents">
      </div>
      <ul id="filelist" class="filelist"></ul>
    </aside>

    <!-- Viewer -->
    <section class="viewer" aria-label="PDF viewer">
      <div class="viewer-actions">
        <div class="crumb" id="crumb">No file selected</div>
        <div class="actions" style="display:flex; gap:8px; flex-wrap:wrap;">
          <a id="openNewTab" class="btn" href="#" target="_blank" rel="noopener">Open in New Tab</a>
          <a id="downloadBtn" class="btn primary" href="#" download>Download</a>
        </div>
      </div>
      <div class="iframe-wrap" id="iframeWrap" aria-live="polite">
        <div class="placeholder" id="placeholder">
          <h3>Select a document</h3>
          <p>Choose a file to load it in the viewer. You can also open it in a new tab or download it.</p>
        </div>
        <iframe id="pdfViewer" title="PDF Viewer" hidden></iframe>
      </div>
    </section>
  </main>

  <script>
    // Highlight current nav automatically
    (function(){
      const current = location.pathname.split('/').pop().toLowerCase();
      document.querySelectorAll('header nav a').forEach(a=>{
        const href = (a.getAttribute('href')||'').toLowerCase();
        if (href && current === href) a.classList.add('active');
      });
    })();

    // Your real documents
    const docs = [
      { title: "Cessna 172K – Pilot’s Operating Handbook (1969)", file: "documents/1969-172K-POH.pdf", desc: "Official 1969 POH for the Cessna 172K." },
      { title: "Cessna 150L – Pilot’s Operating Handbook (N10921)", file: "documents/N10921-POH.pdf", desc: "POH for C150L, tail number N10921." },
      { title: "Garmin GTR 225 – Radio Manual", file: "documents/Garmin-GTR225-Radio.pdf", desc: "Pilot’s guide for the Garmin GTR 225 radio." },
      { title: "Garmin GPS 175 / GNC 355 / GNX 375 – Pilot’s Guide", file: "documents/GPS-175-GNC-355-GNX-375-Pilots-Guide.pdf", desc: "Comprehensive GPS/Comm/Nav unit manual." },
      { title: "FlightBox Pro – User Manual", file: "documents/FlightBoxPro-Manual.pdf", desc: "Reference manual for FlightBox Pro ADS-B." }
    ];

    // Elements
    const listEl = document.getElementById('filelist');
    const searchInput = document.getElementById('search');
    const mobileSelect = document.getElementById('mobileSelect');
    const viewer = document.getElementById('pdfViewer');
    const placeholder = document.getElementById('placeholder');
    const crumb = document.getElementById('crumb');
    const downloadBtn = document.getElementById('downloadBtn');
    const openNewTab = document.getElementById('openNewTab');

    // Build desktop list
    function renderList(filter=""){
      if(!listEl) return;
      listEl.innerHTML = "";
      const q = (filter||"").trim().toLowerCase();
      const filtered = docs.filter(d => !q || d.title.toLowerCase().includes(q) || (d.desc||"").toLowerCase().includes(q));
      if(filtered.length === 0){
        listEl.innerHTML = `<li style="padding:10px 12px; color:#9aa6b6">No matching documents.</li>`;
        return;
      }
      filtered.forEach((doc) => {
        const li = document.createElement('li');
        const a = document.createElement('a');
        a.href = "#"; a.dataset.file = doc.file; a.dataset.title = doc.title;
        a.innerHTML = `
          <span class="pdf-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <path d="M14 2v6h6"/>
              <path d="M9 13h1.5a1.5 1.5 0 0 1 0 3H9v-3zM12.5 16v-3H14a1.5 1.5 0 0 1 0 3h-1.5zM16.5 16v-3H18"/>
            </svg>
          </span>
          <div>
            <div class="file-name">${doc.title}</div>
            ${doc.desc ? `<div class="file-sub">${doc.desc}</div>` : ``}
          </div>
        `;
        a.addEventListener('click', (e) => { e.preventDefault(); openDoc(doc); setActive(a); syncMobilePicker(doc.file); });
        li.appendChild(a); listEl.appendChild(li);
      });
    }

    // Build mobile dropdown
    function renderMobilePicker(){
      if(!mobileSelect) return;
      mobileSelect.innerHTML = docs.map(d => `<option value="${d.file}">${d.title}</option>`).join("");
      mobileSelect.addEventListener('change', (e)=>{
        const file = e.target.value;
        const doc = docs.find(d=>d.file===file);
        if(doc){ openDoc(doc); setActiveByFile(file); }
      });
    }

    function setActive(anchor){
      if(!listEl) return;
      listEl.querySelectorAll('a').forEach(a => a.classList.remove('active'));
      if(anchor) anchor.classList.add('active');
    }
    function setActiveByFile(file){
      const match = listEl ? Array.from(listEl.querySelectorAll('a')).find(a => a.dataset.file === file) : null;
      if(match) setActive(match);
    }
    function syncMobilePicker(file){
      if(mobileSelect && file) mobileSelect.value = file;
    }

    function openDoc(doc){
      viewer.src = doc.file + "#view=FitH";
      viewer.hidden = false; placeholder.hidden = true;
      crumb.innerHTML = `<span style="color:#9fbaf2">Viewing:</span> <b>${doc.title}</b>`;
      downloadBtn.href = doc.file;
      downloadBtn.setAttribute('download', doc.file.split('/').pop());
      openNewTab.href = doc.file;

      // Update URL (helps sharing)
      const url = new URL(window.location);
      url.searchParams.set('file', doc.file);
      history.replaceState({}, "", url);
    }

    // Search (desktop)
    if(searchInput) searchInput.addEventListener('input', (e)=> renderList(e.target.value));

    // Initial render
    renderList();
    renderMobilePicker();

    // If URL preselect exists, open it; otherwise open first
    const pre = new URLSearchParams(location.search).get('file');
    const initial = docs.find(d => d.file === pre) || docs[0];
    if(initial){
      openDoc(initial);
      syncMobilePicker(initial.file);
      setActiveByFile(initial.file);
    }

    // Resize iframe for mobile address bar changes (smooth UX)
    function sizeIframe(){
      if (window.matchMedia('(max-width:900px)').matches){
        const vh = window.visualViewport ? window.visualViewport.height : window.innerHeight;
        const offset = 270; // approx header + hero + controls
        const h = Math.max(300, vh - offset);
        document.getElementById('pdfViewer').style.height = h + 'px';
      }
    }
    sizeIframe();
    window.addEventListener('resize', sizeIframe);
    if(window.visualViewport){ window.visualViewport.addEventListener('resize', sizeIframe); }
  </script>
</body>
</html>
